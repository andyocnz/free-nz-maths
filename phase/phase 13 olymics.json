[
  {
    "id": "OLYM.N.DIVISIBILITY_SQUARE_POWERS",
    "stem": "For how many positive integers n between 1 and {limit} inclusive is n^n a perfect square?",
    "params": { "limit": ["int", 50, 200] },
    "answer": "{floor(limit/2) + floor(sqrt(limit)) - floor(sqrt(limit)/2)}",
    "difficulty": 10,
    "phase": 13,
    "--": "Inspired by counting when n^n is square. Even n → even exponent, square n → even exponent on square base. Subtract overlap of even squares."
  },
  {
    "id": "OLYM.N.HCF_LCM_CLASSIC",
    "stem": "The LCM of two positive integers is {lcm} and their HCF is {hcf}. If one of the numbers is {a}, what is the other number?",
    "params": {
      "hcf": ["int", 6, 30, 6],
      "f1": ["int", 2, 8],
      "f2": ["int", 3, 10],
      "a": "{hcf * f1}",
      "lcm": "{hcf * f1 * f2}"
    },
    "answer": "{hcf * f2}",
    "difficulty": 9,
    "phase": 13,
    "--": "Classic HCF×LCM = a×b property. Very common in Math Kangaroo / AMC 8–10."
  },
  {
    "id": "OLYM.N.MODULAR_BINOMIAL",
    "stem": "Let a_n = ({d}-1)^n + ({d}+1)^n. Find a_{exp} modulo {d*d}.",
    "params": {
      "d": ["choices", 5, 7, 11],
      "exp": ["int", 50, 120]
    },
    "answer": "{((pow(d-1, exp, d*d) + pow(d+1, exp, d*d)) % (d*d))}",
    "difficulty": 10,
    "phase": 13,
    "--": "Directly from AIME 1983 (6^n + 8^n mod 49). Uses (d-1)^n + (d+1)^n ≡ 2 mod d² when n odd, 2*(binomial terms) when even."
  },
  {
    "id": "OLYM.N.BASE_CONVERSION",
    "stem": "The number {value} in base 10 is written as '{digits}' in base b. What is b?",
    "params": {
      "b": ["int", 11, 20],
      "d2": ["int", 1, b-1],
      "d1": ["int", 0, b-1],
      "d0": ["int", 1, b-1],
      "digits": "{d2}{d1}{d0}",
      "value": "{d2*b*b + d1*b + d0}"
    },
    "answer": "{b}",
    "difficulty": 9,
    "phase": 13,
    "--": "Reverse base-conversion puzzle. Forces solving small polynomial."
  },
  {
    "id": "OLYM.N.SUM_OF_DIVISORS",
    "stem": "Find the sum of all positive divisors of {n}.",
    "params": { "n": ["int", 720, 5040, 120] },
    "answer": "{sum_of_divisors(n)}",
    "difficulty": 9,
    "phase": 13,
    "--": "Requires prime factorization → σ multiplicative function."
  },
  {
    "id": "OLYM.A.DIOPHANTINE_LINEAR",
    "stem": "How many ordered pairs of positive integers (x, y) satisfy {a}x + {b}y = {target}?",
    "params": {
      "a": ["int", 3, 9],
      "b": ["int", 4, 10],
      "target": ["int", 100, 600, 50]
    },
    "answer": "{count_diophantine_positive(a, b, target)}",
    "difficulty": 10,
    "phase": 13,
    "--": "Classic AIME-style linear Diophantine counting."
  },
  {
    "id": "OLYM.A.TAN_RECURRENCE",
    "stem": "The sequence is defined by x₁ = {b}/{a} and x_{n+1} = ({a}x_n + {b}) / ({a} - {b}x_n). What is x_{k}?",
    "params": {
      "a": ["int", 5, 10],
      "b": ["int", 2, 4],
      "k": ["int", 100, 250]
    },
    "answer": "{tan_recurrence_solution(a, b, k)}",
    "difficulty": 10,
    "phase": 13,
    "--": "From AIME 2001 tangent addition formula recurrence."
  },
  {
    "id": "OLYM.A.SCALING_FUNCTION",
    "stem": "Function f satisfies f({s}x) = {s}f(x) and f(x) = 1 - |x-2| for 1 ≤ x ≤ 3. Find f({target}).",
    "params": {
      "s": ["choices", 3, 4, 5],
      "target": ["int", 500, 5000]
    },
    "answer": "{scaling_function_solution(s, target)}",
    "difficulty": 10,
    "phase": 13,
    "--": "AIME 1997 style – repeatedly divide by s until in [1,3]."
  },
  {
    "id": "OLYM.A.VIETA_PRIMES",
    "stem": "The roots of x² - {sum} x + k = 0 are both prime numbers. What is k?",
    "params": {
      "p1": 2,
      "p2": ["prime", 50, 200],
      "sum": "{p1 + p2}"
    },
    "answer": "{p1 * p2}",
    "difficulty": 9,
    "phase": 13,
    "--": "One root must be 2 (sum odd), other is sum-2. Very common trick."
  },
  {
    "id": "OLYM.A.FUNCTIONAL_EQ",
    "stem": "f(x) + {c} f(1/x) = {d} x for all x ≠ 0. Find f({val}).",
    "params": {
      "c": ["int", 2, 5],
      "d": ["int", 3, 7],
      "val": ["int", 2, 6]
    },
    "answer": "{functional_equation_solve(c, d, val)}",
    "difficulty": 10,
    "phase": 13,
    "--": "Standard system of two equations by substituting x and 1/x."
  },
  {
    "id": "OLYM.A.TELESCOPING_HARMONIC",
    "stem": "Find the sum 1/(1·2) + 1/(2·3) + … + 1/({n}·({n}+1)). Give as a fraction.",
    "params": { "n": ["int", 50, 200] },
    "answer": "{n}/{n+1}",
    "difficulty": 8,
    "phase": 13,
    "--": "Classic partial fractions telescoping series."
  },
  {
    "id": "OLYM.A.POLY_REMAINDER",
    "stem": "When P(x) is divided by (x-{v1}) remainder is {r1}, by (x-{v2}) remainder is {r2}. When divided by (x-{v1})(x-{v2}) the remainder is ax+b. Find a+b.",
    "params": {
      "v1": ["int", 1, 5],
      "r1": ["int", -15, 15],
      "v2": ["int", 7, 12],
      "r2": ["int", -15, 15]
    },
    "answer": "{poly_remainder_a_plus_b(v1,r1,v2,r2)}",
    "difficulty": 10,
    "phase": 13,
    "--": "Chinese Remainder Theorem for polynomials."
  },
  {
    "id": "OLYM.A.SUM_SQUARES_IDENTITY",
    "stem": "Given x + y = {s} and xy = {p}, find x² + y².",
    "params": {
      "x": ["int", 5, 20],
      "y": ["int", 5, 20],
      "s": "{x+y}",
      "p": "{x*y}"
    },
    "answer": "{s*s - 2*p}",
    "difficulty": 8,
    "phase": 13,
    "--": "Most common identity in contest algebra."
  },
  {
    "id": "OLYM.G.CUBE_ANT",
    "stem": "An ant crawls on the surface of a cube with side {s} from one vertex to the opposite vertex. What is the shortest distance?",
    "params": { "s": ["int", 3, 12] },
    "answer": "{round(sqrt(5)*s, 2)}",
    "difficulty": 9,
    "phase": 13,
    "--": "Unfold cube → sqrt(s² + (2s)²) = s√5."
  },
  {
    "id": "OLYM.G.INCIRCLE_RADIUS",
    "stem": "A right triangle has legs {a} and {b}. What is the inradius?",
    "params": {
      "m": ["int", 3, 8],
      "n": ["int", 1, m-1],
      "a": "{2*m*n}",
      "b": "{m*m - n*n}"
    },
    "answer": "{(a + b - sqrt(a*a + b*b))/2}",
    "difficulty": 9,
    "phase": 13,
    "--": "r = (a+b-c)/2 for any triangle, cleaner with primitives."
  },
  {
    "id": "OLYM.G.SPACE_DIAGONAL",
    "stem": "Find the space diagonal of a rectangular prism with sides {l}, {w}, {h}. Answer to 2 decimal places.",
    "params": {
      "l": ["int", 3, 15],
      "w": ["int", 3, 15],
      "h": ["int", 3, 15]
    },
    "answer": "{round(sqrt(l*l + w*w + h*h), 2)}",
    "difficulty": 8,
    "phase": 13
  },
  {
    "id": "OLYM.G.SHOELACE_AREA",
    "stem": "Triangle with vertices ({x1},{y1}), ({x2},{y2}), ({x3},{y3}). Find its area.",
    "params": {
      "x1": ["int", -8, 8], "y1": ["int", -8, 8],
      "x2": ["int", -8, 8], "y2": ["int", -8, 8],
      "x3": ["int", -8, 8], "y3": ["int", -8, 8]
    },
    "answer": "{0.5 * abs(x1*(y2-y3) + x2*(y3-y1) + x3*(y1-y2))}",
    "difficulty": 9,
    "phase": 13
  },
  {
    "id": "OLYM.G.GEOMETRIC_PROB_CIRCLE",
    "stem": "Point chosen randomly inside square of side {s}. Probability it is within {r} units of centre? (π ≈ 3.14)",
    "params": { "s": ["int", 6, 20, 2], "r": ["int", 1, floor(s/2)-1] },
    "answer": "{round(3.14 * r*r / (s*s), 4)}",
    "difficulty": 9,
    "phase": 13
  },
  {
    "id": "OLYM.C.COMBINATIONS_DIV5",
    "stem": "How many {d}-digit numbers (no leading zero) are divisible by 5 and have digit sum divisible by 5?",
    "params": { "d": ["choices", 3, 4, 5] },
    "answer": "{count_special_fivedigit(d)}",
    "difficulty": 10,
    "phase": 13,
    "--": "AIME 1994 style casework + generating functions."
  },
  {
    "id": "OLYM.C.EXPECTED_VALUE",
    "stem": "From {m} men and {w} women, a committee of {k} is chosen randomly. Expected number of women?",
    "params": {
      "m": ["int", 5, 12],
      "w": ["int", 6, 15],
      "k": ["int", 3, 8]
    },
    "answer": "{k * w / (m + w)}",
    "difficulty": 8,
    "phase": 13,
    "--": "Linearity of expectation – works even with dependencies!"
  },
  {
    "id": "OLYM.C.BUG_TRIANGLE",
    "stem": "Bug on triangle vertices moves randomly to adjacent vertex. Probability back at start after {n} moves?",
    "params": { "n": ["int", 6, 20, 2] },
    "answer": "{bug_triangle_probability(n)}",
    "difficulty": 10,
    "phase": 13,
    "--": "Beautiful recurrence, period 3 behaviour."
  },
  {
    "id": "OLYM.C.DERANGEMENT",
    "stem": "Number of derangements of {n} items (no fixed points).",
    "params": { "n": ["int", 5, 10] },
    "answer": "{derangement(n)}",
    "difficulty": 9,
    "phase": 13
  },
  {
    "id": "OLYM.C.STARS_AND_BARS",
    "stem": "Number of non-negative integer solutions to x₁ + x₂ + … + x_{k} = {n}.",
    "params": { "n": ["int", 8, 25], "k": ["int", 3, 6] },
    "answer": "{binomial(n + k - 1, k - 1)}",
    "difficulty": 8,
    "phase": 13
  },
  {
    "id": "OLYM.C.PIGEONHOLE_SUM",
    "stem": "Minimum numbers to pick from 1..{s} to guarantee two sum to {s}+1?",
    "params": { "s": ["int", 8, 20, 2] },
    "answer": "{floor(s/2) + 1}",
    "difficulty": 9,
    "phase": 13,
    "--": "Pigeonholes are the pairs (1,s),(2,s-1),…, floor(s/2)+1 is the answer."
  },


  {
    "id": "OLYMP.NT.DIVISIBILITY_SQUARE_POWER",
    "topic_note": "Olympiad / Number Theory / When is n^n a perfect square?",
    "stem": "For how many positive integers n between 1 and {limit} inclusive is n^n a perfect square?",
    "params": { "limit": ["int", 500, 2000, 100] },
    "answer": "{ floor(limit/2) + floor(sqrt(limit)) - floor(sqrt(limit/2)*2)/2 }",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.NT.LCM_HCF_PRODUCT",
    "topic_note": "Olympiad / Number Theory / HCF × LCM property",
    "stem": "The LCM of two positive integers is {lcm} and their HCF is {hcf}. If one of the numbers is {a}, what is the other number?",
    "params": { 
      "hcf": ["int", 12, 48, 6], 
      "f1": ["int", 3, 10], 
      "f2": ["int", 5, 15], 
      "a": "{hcf * f1}", 
      "lcm": "{hcf * f1 * f2}" 
    },
    "answer": "{hcf * f2}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.NT.MODULAR_BINOMIAL",
    "topic_note": "Olympiad / Number Theory / (d-1)^n + (d+1)^n mod d²",
    "stem": "Let a_n = ({base}-1)^n + ({base}+1)^n. Find a_{exp} modulo {mod}.",
    "params": { 
      "base": ["choice", 7, 10, 13], 
      "mod": "{base*base}", 
      "exp": ["int", 50, 150] 
    },
    "answer": "{ ((BigInt(base-1)**BigInt(exp)) + (BigInt(base+1)**BigInt(exp))) % BigInt(mod) }",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.NT.BASE_CONVERSION",
    "topic_note": "Olympiad / Number Theory / Reverse base conversion",
    "stem": "The number {value} in base 10 is written as '{digits}' in base b (where b > each digit). Find b.",
    "params": { 
      "b": ["int", 11, 20], 
      "d2": ["int", 1, b-1], 
      "d1": ["int", 0, b-1], 
      "d0": ["int", 1, b-1], 
      "digits": "{d2}{d1}{d0}", 
      "value": "{d2*b*b + d1*b + d0}" 
    },
    "answer": "{b}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.NT.SUM_DIVISORS",
    "topic_note": "Olympiad / Number Theory / Sum of divisors function",
    "stem": "Find the sum of all positive divisors of {n}.",
    "params": { "n": ["int", 1000, 100000, 1000] },
    "answer": "sum_of_divisors(n)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.ALG.DIOPHANTINE_COUNT",
    "topic_note": "Olympiad / Algebra / Positive solutions to linear Diophantine equation",
    "stem": "How many ordered pairs of positive integers (x,y) satisfy {a}x + {b}y = {target}?",
    "params": { 
      "a": ["int", 3, 15], 
      "b": ["int", 4, 16], 
      "target": ["int", 200, 1000, 50] 
    },
    "answer": "count_positive_diophantine(a,b,target)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.ALG.TAN_RECURRENCE",
    "topic_note": "Olympiad / Algebra / Tangent addition recurrence",
    "stem": "The sequence is defined by x₁ = {num}/{den} and x_{n+1} = ({den}x_n + {num}) / ({den} - {num}x_n). Find x_{term}.",
    "params": { 
      "den": ["int", 5, 12], 
      "num": ["int", 1, den-1], 
      "term": ["int", 100, 500, 50] 
    },
    "answer": "tan_recurrence_solution(den,num,term)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.T.TRIG_GRAPH"
  },
  {
    "id": "OLYMP.ALG.SCALING_FUNCTION",
    "topic_note": "Olympiad / Algebra / Homogeneous functional equation",
    "stem": "A function satisfies f({k}x) = {k}f(x) for all x > 0 and f(x) = 1 - |x-2| for 1 ≤ x ≤ 3. Find f({target}).",
    "params": { 
      "k": ["choice", 3, 4, 5], 
      "target": ["int", 500, 5000, 100] 
    },
    "answer": "scaling_function_value(k,target)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.ALG.PRIME_ROOTS_QUADRATIC",
    "topic_note": "Olympiad / Algebra / Quadratic with two prime roots",
    "stem": "The roots of x² - {sum} x + k = 0 are both prime numbers. Find the only possible value of k.",
    "params": { 
      "p1": [2], 
      "p2": ["prime", 50, 200], 
      "sum": "{p1+p2}" 
    },
    "answer": "{p1*p2}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.ALG.FUNCTIONAL_INVERSE",
    "topic_note": "Olympiad / Algebra / Functional equation with f(1/x)",
    "stem": "f(x) + {c}f(1/x) = {d}x for all x ≠ 0. Find f({val}).",
    "params": { 
      "c": ["int", 2, 6], 
      "d": ["int", 2, 8], 
      "val": ["int", 2, 10] 
    },
    "answer": "solve_inverse_functional(c,d,val)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.ALG.TELESCOPING_HARMONIC",
    "topic_note": "Olympiad / Algebra / Telescoping partial fractions",
    "stem": "Find the exact value of the sum 1/(1·2) + 1/(2·3) + … + 1/({n}·{n+1}).",
    "params": { "n": ["int", 100, 1000, 50] },
    "answer": "{n}/{n+1}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.GEOM.CUBE_ANT",
    "topic_note": "Olympiad / Geometry / Shortest path on cube surface",
    "stem": "An ant on a cube of side length {s} wants to go from one vertex to the opposite vertex along the surface. What is the shortest possible distance?",
    "params": { "s": ["int", 1, 20] },
    "answer": "{sqrt(5)*s}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.G.6"
  },
  {
    "id": "OLYMP.GEOM.INRADIUS_RIGHT_TRIANGLE",
    "topic_note": "Olympiad / Geometry / Inradius of primitive Pythagorean triple",
    "stem": "A right-angled triangle has legs {a} and {b} and hypotenuse {c}. Find the radius of its inscribed circle.",
    "params": { 
      "m": ["int", 3, 10], 
      "n": ["int", 1, m-1], 
      "a": "{m*m - n*n}", 
      "b": "{2*m*n}", 
      "c": "{m*m + n*n}" 
    },
    "answer": "{(a + b - c)/2}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.G.5"
  },
  {
    "id": "OLYMP.COMB.DERANGEMENT",
    "topic_note": "Olympiad / Combinatorics / Derangements",
    "stem": "In how many ways can {n} distinct letters be placed into {n} envelopes so that no letter goes into its correct envelope?",
    "params": { "n": ["int", 7, 12] },
    "answer": "derangement(n)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.P.8"
  },
  {
    "id": "OLYMP.COMB.STARS_BARS",
    "topic_note": "Olympiad / Combinatorics / Non-negative integer solutions",
    "stem": "Find the number of non-negative integer solutions to x₁ + x₂ + … + x_{k} = {n}.",
    "params": { 
      "n": ["int", 20, 100, 10], 
      "k": ["int", 3, 8] 
    },
    "answer": "binomial(n + k - 1, k - 1)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.P.8"
  },
  {
    "id": "OLYMP.COMB.PIGEONHOLE_SUM",
    "topic_note": "Olympiad / Combinatorics / Pigeonhole with pair sum",
    "stem": "What is the smallest number of integers that must be chosen from {1, 2, …, {m}} to guarantee that at least two sum to {m}+1?",
    "params": { "m": ["int", 10, 30, 2] },
    "answer": "{floor(m/2) + 1}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.P.8"
  },
  {
    "id": "OLYMP.PROB.BUG_TRIANGLE",
    "topic_note": "Olympiad / Probability / Random walk on triangle",
    "stem": "A bug starts at a vertex of a triangle and at each step moves to one of the two adjacent vertices with equal probability. After {steps} moves, what is the probability it is back at the start?",
    "params": { "steps": ["int", 10, 30, 2] },
    "answer": "triangle_random_walk_probability(steps)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.P.8"
  },
  {
    "id": "OLYMP.ALG.POLY_REMAINDER_LINEAR",
    "topic_note": "Olympiad / Algebra / Polynomial remainder theorem (linear remainder)",
    "stem": "When P(x) is divided by (x-{a}) the remainder is {ra}, and by (x-{b}) the remainder is {rb}. When divided by (x-{a})(x-{b}) the remainder is cx + d. Find c + d.",
    "params": { 
      "a": ["int", 1, 5], 
      "b": ["int", 6, 10], 
      "ra": ["int", -20, 20], 
      "rb": ["int", -20, 20] 
    },
    "answer": "poly_linear_remainder_sum(a,b,ra,rb)",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.AA.4"
  },
  {
    "id": "OLYMP.GEOM.COORDINATE_AREA",
    "topic_note": "Olympiad / Geometry / Shoelace formula",
    "stem": "Find the area of the triangle with vertices ({x1},{y1}), ({x2},{y2}), ({x3},{y3}).",
    "params": { 
      "x1": ["int", -10, 10], "y1": ["int", -10, 10],
      "x2": ["int", -10, 10], "y2": ["int", -10, 10],
      "x3": ["int", -10, 10], "y3": ["int", -10, 10]
    },
    "answer": "{0.5 * abs(x1*(y2-y3) + x2*(y3-y1) + x3*(y1-y2))}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.G.4"
  },
  {
    "id": "OLYMP.PROB.EXPECTED_WOMEN",
    "topic_note": "Olympiad / Probability / Linearity of expectation",
    "stem": "A committee of {size} people is chosen at random from {men} men and {women} women. What is the expected number of women on the committee?",
    "params": { 
      "men": ["int", 5, 15], 
      "women": ["int", 8, 20], 
      "size": ["int", 4, 10] 
    },
    "answer": "{size * women / (men + women)}",
    "difficulty": 13,
    "phase": 13,
    "year": "Y12.P.8"
  }



]